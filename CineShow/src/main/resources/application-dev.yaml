spring:
  config:
    activate:
      on-profile: dev
  output:
    ansi:
      enabled: ALWAYS
  #  data:
  #    redis:
  #      host: localhost
  #      port: 6379

#  data:
#    redis:
#      host: redis-16466.c1.ap-southeast-1-1.ec2.redns.redis-cloud.com
#      port: 16466
#      username: default
#      password: 9aCamrhrRMWSj12qrRaFmF09EWIwE25C
#      ssl:
#        enabled: false


#  Redis Upstash
  data:
    redis:
      host: genuine-mastiff-5696.upstash.io
      port: 6379
      password: ARZAAAImcDI5MzY5ZTcwYTE5ZGQ0OWQ5ODRmOGUyMjUyNTVlNjA0MXAyNTY5Ng
      ssl:
        enabled: true

  #config oAuth 2.0
  security:
    oauth2:
      client:
        registration:
          google-user:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            redirect-uri: "{baseUrl}/login/oauth2/code/google-user"
            provider: google
            scope:
              - openid
              - profile
              - email
          google-admin:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            redirect-uri: "{baseUrl}/login/oauth2/code/google-admin"
            provider: google
            scope:
              - openid
              - profile
              - email
        provider:
          google:
            user-info-uri: https://www.googleapis.com/oauth2/v3/userinfo
            authorization-uri: https://accounts.google.com/o/oauth2/v2/auth
            token-uri: https://oauth2.googleapis.com/token
            user-name-attribute: sub
      REDIRECT_URI_HOME: "http://localhost:3000/home"
      REDIRECT_URI_ADMIN: "http://localhost:3000/admin"
      REDIRECT_URI_OPERATOR: "http://localhost:3000/operator-manager/dashboard"
      REDIRECT_URI_BUSINESS: "http://localhost:3000/business-manager/dashboard"

  devtools:
    add-properties: true

  h2:
    console:
      enabled: true
      path: /h2-console

  datasource:
    url: jdbc:mysql://cineshow-db.cxg2yw8kealb.ap-southeast-1.rds.amazonaws.com:3306/cineshow?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
    username: admin
    password: Bimatcuaphong
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 15          # Tăng lên 15 connection để xử lý nhiều request đồng thời
      minimum-idle: 5                # Tăng lên 5 connection sẵn sàng
      idle-timeout: 300000           # 5 phút không dùng -> đóng
      max-lifetime: 1200000          # 20 phút -> đóng và tạo mới
      connection-timeout: 60000      # Tăng lên 60s timeout (AWS RDS có thể chậm do network latency)
      validation-timeout: 10000       # Tăng lên 10s cho việc kiểm tra connection
      pool-name: HikariPool-CineShow
      # Tối ưu cho AWS RDS: thêm các tham số để giảm latency
      connection-test-query: SELECT 1
      leak-detection-threshold: 60000 # Phát hiện connection leak sau 60s

#  datasource:
#    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:cineshow}?useUnicode=true&characterEncoding=UTF-8&createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Ho_Chi_Minh
#    username: ${DB_USER:root}
#    password: ${DB_PASS:}
#    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect

  sendgrid:
    api-key: "${SENDGRID_API_KEY}"
    from-email: "manhphongchy17@gmail.com"

app:
  frontend:
    verify-url: "http://localhost:3000/verify"   # URL frontend để verify OTP
  sendgrid:
    otp-template-id: "d-71a24bbc41824c0495bc166a115275a0"   # Template ID cho OTP

admin: { email_default: "admin@test.com", password_default: "00000000" }
user-account-test: { email: "user@test.com", password: "00000000" }
staff-account-test: { email: "staff@test.com", password: "00000000" }
operation-account-test: { email: "operation@test.com", password: "00000000" }
business-account-test: { email: "business@test.com", password: "00000000" }

jwt:
  secret-key-access-token: "8mhZcWZVPhDeucdGaUQhUQoSkda34jAtkBPJNP54dvQ"
  secret-key-refresh-token: "Gu4jjMNk9oBnertRHqfRZJdHnz5jihbbnjAHeWNQbpg"
  expiration-access-token: 9000000 # 15 phút (15 * 60 * 1000)
  expiration-refresh-token: 2592000000     #1000 * 60 * 60 * 24 *30

aws:
  access-key: ${AWS_ACCESS_KEY}
  secret-key: ${AWS_SECRET_KEY}
  s3:
    bucket: social-networkings
    region: ap-southeast-1
  cloudfront:
    url: https://d28ic9z7shvx92.cloudfront.net

spring.servlet.multipart.enabled: true
spring.servlet.multipart.max-file-size: 5MB
spring.servlet.multipart.max-request-size: 10MB


#logging:
#  level:
#    root: INFO
#    org.hibernate.SQL: DEBUG
#    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
#    org.springframework.orm.jpa: DEBUG
#    org.springframework.transaction: DEBUG
#    org.hibernate.engine.jdbc.spi.SqlExceptionHelper: WARN


vnpay:
  tmn-code: ME5W6VFG
  hash-secret: ${VNPAY_HASH_SECRET}
  pay-url: https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
  return-url: http://localhost:3000/booking/confirmation
  version: 2.1.0
  timeout: 7
  command: pay

booking:
  ttl:
    default: 360    # 6 phút - chọn ghế
    payment: 480    #8 ' giữ ghế cho thanh toán


    




