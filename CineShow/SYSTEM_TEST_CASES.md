# SYSTEM TEST CASES - LU·ªíNG ƒê·∫∂T V√â CH√çNH

## üìã T·ªîNG QUAN

T√†i li·ªáu n√†y m√¥ t·∫£ c√°c test case cho h·ªá th·ªëng ƒë·∫∑t v√© r·∫°p chi·∫øu phim, ƒë∆∞·ª£c t·ªï ch·ª©c theo format chu·∫©n v·ªõi c√°c c·ªôt: Test Case ID, Description, Procedure, Expected Results, Pre-conditions, v√† c√°c Round test.

---

## üé¨ SCENARIO A: LU·ªíNG ƒê·∫∂T V√â C∆† B·∫¢N

| Test Case ID | Test Case Description           | Test Case Procedure                                                                                                                                                                                                                         | Expected Results                                                                                                                                                                                                                                                                            | Pre-conditions                                                                                                     | Round 1 | Test date | Tester | Round 2 | Test date | Tester | Round 3 | Test date | Tester | Note |
| ------------ | ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------- | --------- | ------ | ------- | --------- | ------ | ------- | --------- | ------ | ---- |
| TC-BOOK-001  | ƒêƒÉng nh·∫≠p th√†nh c√¥ng            | 1. Truy c·∫≠p trang ƒëƒÉng nh·∫≠p<br>2. Nh·∫≠p email v√† password h·ª£p l·ªá<br>3. Click n√∫t "ƒêƒÉng nh·∫≠p"                                                                                                                                                 | - Status 200<br>- Nh·∫≠n ƒë∆∞·ª£c accessToken v√† refreshToken<br>- Chuy·ªÉn ƒë·∫øn trang ch·ªß<br>- Token ƒë∆∞·ª£c l∆∞u trong localStorage                                                                                                                                                                    | User ƒë√£ t·ªìn t·∫°i trong h·ªá th·ªëng v·ªõi email v√† password h·ª£p l·ªá                                                        | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-002  | Ch·ªçn su·∫•t chi·∫øu                 | 1. ƒêƒÉng nh·∫≠p th√†nh c√¥ng<br>2. Ch·ªçn phim t·ª´ danh s√°ch<br>3. Ch·ªçn ng√†y chi·∫øu (trong 7 ng√†y t·ªõi)<br>4. Ch·ªçn su·∫•t chi·∫øu t·ª´ danh s√°ch<br>5. Click "Ch·ªçn gh·∫ø"                                                                                     | - Hi·ªÉn th·ªã danh s√°ch su·∫•t chi·∫øu theo ng√†y<br>- Hi·ªÉn th·ªã th√¥ng tin ph√≤ng chi·∫øu (t√™n ph√≤ng, lo·∫°i ph√≤ng, s·ªë gh·∫ø c√≤n tr·ªëng)<br>- Chuy·ªÉn ƒë·∫øn trang ch·ªçn gh·∫ø v·ªõi showtimeId                                                                                                                       | - User ƒë√£ ƒëƒÉng nh·∫≠p<br>- C√≥ phim ƒëang chi·∫øu<br>- C√≥ su·∫•t chi·∫øu trong ng√†y ƒë∆∞·ª£c ch·ªçn                                | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-003  | Ch·ªçn gh·∫ø th√†nh c√¥ng             | 1. T·ª´ trang ch·ªçn su·∫•t chi·∫øu, click "Ch·ªçn gh·∫ø"<br>2. Trang ch·ªçn gh·∫ø hi·ªÉn th·ªã s∆° ƒë·ªì gh·∫ø<br>3. Click v√†o gh·∫ø tr·ªëng (m√†u xanh)<br>4. Gh·∫ø ƒë∆∞·ª£c highlight v√† th√™m v√†o danh s√°ch ƒë√£ ch·ªçn<br>5. Click "Ti·∫øp t·ª•c"                                    | - Gh·∫ø ƒë∆∞·ª£c ch·ªçn hi·ªÉn th·ªã m√†u v√†ng (HELD)<br>- Gh·∫ø ƒë∆∞·ª£c th√™m v√†o Order Summary<br>- WebSocket k·∫øt n·ªëi v√† broadcast status HELD<br>- T·ªïng ti·ªÅn ƒë∆∞·ª£c t√≠nh t·ª± ƒë·ªông<br>- Button "Ti·∫øp t·ª•c" ƒë∆∞·ª£c enable                                                                                           | - User ƒë√£ ƒëƒÉng nh·∫≠p<br>- ƒê√£ ch·ªçn su·∫•t chi·∫øu<br>- C√≥ gh·∫ø AVAILABLE trong su·∫•t chi·∫øu<br>- WebSocket server ho·∫°t ƒë·ªông | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-004  | Ch·ªçn nhi·ªÅu gh·∫ø c√πng l√∫c         | 1. T·ª´ trang ch·ªçn gh·∫ø<br>2. Click ch·ªçn gh·∫ø th·ª© nh·∫•t<br>3. Click ch·ªçn gh·∫ø th·ª© hai<br>4. Click ch·ªçn gh·∫ø th·ª© ba<br>5. T·∫•t c·∫£ gh·∫ø ƒë∆∞·ª£c highlight                                                                                                 | - T·∫•t c·∫£ 3 gh·∫ø hi·ªÉn th·ªã tr·∫°ng th√°i HELD<br>- Order Summary hi·ªÉn th·ªã ƒë√∫ng s·ªë gh·∫ø ƒë√£ ch·ªçn<br>- T·ªïng ti·ªÅn = s·ªë gh·∫ø √ó gi√° v√©<br>- WebSocket broadcast t·∫•t c·∫£ gh·∫ø v·ªõi status HELD                                                                                                                | - User ƒë√£ ƒëƒÉng nh·∫≠p<br>- ƒê√£ ch·ªçn su·∫•t chi·∫øu<br>- C√≥ √≠t nh·∫•t 3 gh·∫ø AVAILABLE                                        | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-005  | B·ªè ch·ªçn gh·∫ø                     | 1. T·ª´ trang ch·ªçn gh·∫ø, ƒë√£ ch·ªçn 2 gh·∫ø<br>2. Click l·∫°i v√†o gh·∫ø ƒë√£ ch·ªçn (m√†u v√†ng)<br>3. Gh·∫ø ƒë∆∞·ª£c b·ªè ch·ªçn                                                                                                                                       | - Gh·∫ø quay v·ªÅ tr·∫°ng th√°i AVAILABLE (m√†u xanh)<br>- Gh·∫ø b·ªã x√≥a kh·ªèi Order Summary<br>- T·ªïng ti·ªÅn ƒë∆∞·ª£c t√≠nh l·∫°i<br>- WebSocket broadcast status RELEASED<br>- C√°c user kh√°c c√≥ th·ªÉ ch·ªçn gh·∫ø n√†y                                                                                               | - User ƒë√£ ch·ªçn √≠t nh·∫•t 1 gh·∫ø                                                                                       | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-006  | Ch·ªçn gh·∫ø ƒë√£ ƒë∆∞·ª£c ng∆∞·ªùi kh√°c gi·ªØ | 1. User A ch·ªçn gh·∫ø X<br>2. User B (trong tr√¨nh duy·ªát kh√°c) c·ªë ch·ªçn c√πng gh·∫ø X<br>3. User B click v√†o gh·∫ø X                                                                                                                                  | - User B kh√¥ng th·ªÉ ch·ªçn gh·∫ø X<br>- Gh·∫ø X hi·ªÉn th·ªã m√†u v√†ng (HELD) cho User B<br>- Th√¥ng b√°o l·ªói ho·∫∑c gh·∫ø kh√¥ng ph·∫£n h·ªìi khi click<br>- WebSocket nh·∫≠n status FAILED                                                                                                                         | - C√≥ √≠t nh·∫•t 2 user ƒë√£ ƒëƒÉng nh·∫≠p<br>- User A ƒë√£ ch·ªçn gh·∫ø X<br>- TTL c·ªßa seat hold ch∆∞a h·∫øt                         | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-007  | Ch·ªçn combo/ƒë·ªì ƒÉn (t√πy ch·ªçn)     | 1. T·ª´ trang ch·ªçn gh·∫ø, click "Ti·∫øp t·ª•c"<br>2. Trang ch·ªçn combo hi·ªÉn th·ªã danh s√°ch combo<br>3. Click n√∫t "+" ƒë·ªÉ th√™m combo v√†o gi·ªè<br>4. ƒêi·ªÅu ch·ªânh s·ªë l∆∞·ª£ng b·∫±ng n√∫t +/-<br>5. Click "Ti·∫øp t·ª•c"                                              | - Combo ƒë∆∞·ª£c th√™m v√†o Order Summary<br>- T·ªïng ti·ªÅn ƒë∆∞·ª£c c·∫≠p nh·∫≠t (v√© + combo)<br>- S·ªë l∆∞·ª£ng combo c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh<br>- C√≥ th·ªÉ b·ªè ch·ªçn combo b·∫±ng c√°ch set quantity = 0                                                                                                                    | - User ƒë√£ ch·ªçn gh·∫ø<br>- C√≥ combo IN_STOCK trong h·ªá th·ªëng                                                           | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-008  | B·ªè qua b∆∞·ªõc ch·ªçn combo          | 1. T·ª´ trang ch·ªçn gh·∫ø, click "Ti·∫øp t·ª•c"<br>2. Trang ch·ªçn combo hi·ªÉn th·ªã<br>3. Click "B·ªè qua" ho·∫∑c "Ti·∫øp t·ª•c" kh√¥ng ch·ªçn combo                                                                                                                | - Chuy·ªÉn ƒë·∫øn trang thanh to√°n<br>- Order Summary ch·ªâ hi·ªÉn th·ªã v√©<br>- T·ªïng ti·ªÅn = gi√° v√© (kh√¥ng c√≥ combo)                                                                                                                                                                                   | - User ƒë√£ ch·ªçn gh·∫ø                                                                                                 | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-009  | Thanh to√°n v·ªõi VNPay            | 1. T·ª´ trang ch·ªçn combo, click "Ti·∫øp t·ª•c"<br>2. Trang thanh to√°n hi·ªÉn th·ªã th√¥ng tin ƒë∆°n h√†ng<br>3. Nh·∫≠p th√¥ng tin kh√°ch h√†ng (n·∫øu c·∫ßn)<br>4. Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n "VNPay"<br>5. √Åp d·ª•ng ƒëi·ªÉm th∆∞·ªüng (n·∫øu c√≥)<br>6. Click "Thanh to√°n" | - H·ªá th·ªëng t·∫°o Order v·ªõi status PENDING<br>- T·∫°o Payment v·ªõi status PENDING<br>- Redirect ƒë·∫øn URL thanh to√°n VNPay<br>- OrderSession v√† SeatHold TTL ƒë∆∞·ª£c extend                                                                                                                            | - User ƒë√£ ch·ªçn gh·∫ø<br>- C√≥ ph∆∞∆°ng th·ª©c thanh to√°n VNPay active<br>- User c√≥ th·ªÉ c√≥ ƒëi·ªÉm th∆∞·ªüng                     | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-010  | Thanh to√°n th√†nh c√¥ng           | 1. T·ª´ trang VNPay, th·ª±c hi·ªán thanh to√°n<br>2. VNPay redirect v·ªÅ `/booking/confirmation`<br>3. Backend x·ª≠ l√Ω IPN callback<br>4. Trang confirmation hi·ªÉn th·ªã k·∫øt qu·∫£                                                                          | - Trang confirmation hi·ªÉn th·ªã "Thanh to√°n th√†nh c√¥ng"<br>- Order status ‚Üí COMPLETED<br>- Payment status ‚Üí COMPLETED<br>- Tickets status ‚Üí BOOKED<br>- WebSocket broadcast BOOKED cho t·∫•t c·∫£ clients<br>- OrderSession v√† SeatHold b·ªã x√≥a kh·ªèi Redis<br>- User nh·∫≠n ƒëi·ªÉm th∆∞·ªüng m·ªõi (n·∫øu c√≥) | - User ƒë√£ checkout v√† redirect ƒë·∫øn VNPay<br>- Thanh to√°n th√†nh c√¥ng tr√™n VNPay                                     | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-BOOK-011  | Thanh to√°n th·∫•t b·∫°i             | 1. T·ª´ trang VNPay, thanh to√°n th·∫•t b·∫°i ho·∫∑c h·ªßy<br>2. VNPay redirect v·ªÅ `/booking/confirmation`<br>3. Backend x·ª≠ l√Ω IPN callback<br>4. Trang confirmation hi·ªÉn th·ªã k·∫øt qu·∫£                                                                  | - Trang confirmation hi·ªÉn th·ªã "Thanh to√°n kh√¥ng th√†nh c√¥ng"<br>- Order status ‚Üí CANCELED ho·∫∑c gi·ªØ PENDING<br>- Payment status ‚Üí FAILED<br>- Tickets v·∫´n AVAILABLE (ch∆∞a BOOKED)<br>- OrderSession v√† SeatHold b·ªã x√≥a<br>- User c√≥ th·ªÉ th·ª≠ l·∫°i                                               | - User ƒë√£ checkout v√† redirect ƒë·∫øn VNPay<br>- Thanh to√°n th·∫•t b·∫°i tr√™n VNPay                                       | Pending |           |        | Pending |           |        | Pending |           |        |      |

---

## üîê SCENARIO B: AUTHENTICATION & AUTHORIZATION

| Test Case ID | Test Case Description                  | Test Case Procedure                                                                                                           | Expected Results                                                                                                             | Pre-conditions                        | Round 1 | Test date | Tester | Round 2 | Test date | Tester | Round 3 | Test date | Tester | Note |
| ------------ | -------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- | ------- | --------- | ------ | ------- | --------- | ------ | ------- | --------- | ------ | ---- |
| TC-AUTH-001  | ƒêƒÉng nh·∫≠p v·ªõi th√¥ng tin sai            | 1. Truy c·∫≠p trang ƒëƒÉng nh·∫≠p<br>2. Nh·∫≠p email ho·∫∑c password sai<br>3. Click "ƒêƒÉng nh·∫≠p"                                        | - Status 401<br>- Hi·ªÉn th·ªã th√¥ng b√°o l·ªói "Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng"<br>- Kh√¥ng nh·∫≠n ƒë∆∞·ª£c token<br>- Kh√¥ng chuy·ªÉn trang | Kh√¥ng c√≥                              | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-AUTH-002  | Truy c·∫≠p trang booking kh√¥ng ƒëƒÉng nh·∫≠p | 1. X√≥a token kh·ªèi localStorage<br>2. Truy c·∫≠p tr·ª±c ti·∫øp `/booking?movieId=1`                                                  | - Redirect ƒë·∫øn trang ƒëƒÉng nh·∫≠p<br>- Ho·∫∑c hi·ªÉn th·ªã l·ªói 401<br>- Kh√¥ng th·ªÉ truy c·∫≠p trang booking                              | Kh√¥ng c√≥                              | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-AUTH-003  | Token h·∫øt h·∫°n khi ƒëang ƒë·∫∑t v√©          | 1. ƒêƒÉng nh·∫≠p v√† b·∫Øt ƒë·∫ßu ƒë·∫∑t v√©<br>2. Ch·ªù token h·∫øt h·∫°n (ho·∫∑c x√≥a token)<br>3. Th·ª±c hi·ªán action ti·∫øp theo (ch·ªçn gh·∫ø, checkout) | - API tr·∫£ v·ªÅ 401 Unauthorized<br>- Redirect ƒë·∫øn trang ƒëƒÉng nh·∫≠p<br>- Ho·∫∑c hi·ªÉn th·ªã th√¥ng b√°o "Phi√™n ƒëƒÉng nh·∫≠p ƒë√£ h·∫øt h·∫°n"    | User ƒë√£ ƒëƒÉng nh·∫≠p v√† token s·∫Ω h·∫øt h·∫°n | Pending |           |        | Pending |           |        | Pending |           |        |      |

---

## ‚ö†Ô∏è SCENARIO C: ERROR HANDLING & EDGE CASES

| Test Case ID | Test Case Description                     | Test Case Procedure                                                                                        | Expected Results                                                                                                                                                       | Pre-conditions                                      | Round 1 | Test date | Tester | Round 2 | Test date | Tester | Round 3 | Test date | Tester | Note |
| ------------ | ----------------------------------------- | ---------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- | ------- | --------- | ------ | ------- | --------- | ------ | ------- | --------- | ------ | ---- |
| TC-ERROR-001 | Gh·∫ø h·∫øt h·∫°n hold khi ƒëang checkout        | 1. User ch·ªçn gh·∫ø<br>2. Ch·ªù TTL h·∫øt (600s) ho·∫∑c mock expire<br>3. C·ªë checkout                               | - Checkout fail<br>- Hi·ªÉn th·ªã th√¥ng b√°o "Gh·∫ø ƒë√£ h·∫øt h·∫°n, vui l√≤ng ch·ªçn l·∫°i"<br>- Redirect v·ªÅ trang ch·ªçn gh·∫ø<br>- Gh·∫ø quay v·ªÅ tr·∫°ng th√°i AVAILABLE                      | User ƒë√£ ch·ªçn gh·∫ø v√† TTL s·∫Ω h·∫øt                      | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-ERROR-002 | WebSocket disconnect khi ƒëang ch·ªçn gh·∫ø    | 1. User ƒëang ·ªü trang ch·ªçn gh·∫ø<br>2. WebSocket b·ªã disconnect (m·∫•t m·∫°ng)<br>3. WebSocket t·ª± ƒë·ªông reconnect   | - Hi·ªÉn th·ªã th√¥ng b√°o "ƒêang k·∫øt n·ªëi l·∫°i..."<br>- WebSocket t·ª± ƒë·ªông reconnect sau 5s<br>- Tr·∫°ng th√°i gh·∫ø ƒë∆∞·ª£c sync l·∫°i t·ª´ backend<br>- User v·∫´n c√≥ th·ªÉ ti·∫øp t·ª•c ch·ªçn gh·∫ø | User ƒëang ·ªü trang ch·ªçn gh·∫ø v·ªõi WebSocket connected  | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-ERROR-003 | Reload trang khi ƒëang ch·ªçn gh·∫ø            | 1. User ch·ªçn 2 gh·∫ø<br>2. Reload trang (F5)<br>3. Trang load l·∫°i                                            | - Trang load l·∫°i th√†nh c√¥ng<br>- 2 gh·∫ø v·∫´n ƒë∆∞·ª£c gi·ªØ (t·ª´ OrderSession trong Redis)<br>- WebSocket reconnect<br>- Order Summary hi·ªÉn th·ªã ƒë√∫ng gh·∫ø ƒë√£ ch·ªçn                | User ƒë√£ ch·ªçn gh·∫ø v√† OrderSession c√≤n trong Redis    | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-ERROR-004 | Ch·ªçn combo v∆∞·ª£t qu√° stock                 | 1. T·ª´ trang ch·ªçn combo<br>2. Ch·ªçn combo c√≥ stock = 5<br>3. C·ªë th√™m 10 combo v√†o gi·ªè                        | - Hi·ªÉn th·ªã th√¥ng b√°o "S·ªë l∆∞·ª£ng v∆∞·ª£t qu√° t·ªìn kho"<br>- Kh√¥ng th·ªÉ th√™m qu√° s·ªë l∆∞·ª£ng stock<br>- S·ªë l∆∞·ª£ng t·ªëi ƒëa = stock hi·ªán t·∫°i                                          | Combo c√≥ stock h·∫°n ch·∫ø                              | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-ERROR-005 | Thanh to√°n v·ªõi OrderSession ƒë√£ expire     | 1. User checkout v√† t·∫°o Order<br>2. OrderSession TTL h·∫øt<br>3. VNPay callback v·ªÅ                           | - IPN v·∫´n x·ª≠ l√Ω ƒë∆∞·ª£c (v√¨ Order ƒë√£ t·∫°o trong DB)<br>- Payment ƒë∆∞·ª£c x·ª≠ l√Ω b√¨nh th∆∞·ªùng<br>- Redis cleanup kh√¥ng ·∫£nh h∆∞·ªüng                                                 | User ƒë√£ checkout nh∆∞ng OrderSession TTL h·∫øt         | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-ERROR-006 | Nhi·ªÅu user c√πng ch·ªçn gh·∫ø (race condition) | 1. User A v√† User B c√πng m·ªü trang ch·ªçn gh·∫ø<br>2. C·∫£ 2 c√πng click v√†o gh·∫ø X c√πng l√∫c<br>3. Quan s√°t k·∫øt qu·∫£ | - Ch·ªâ 1 user th√†nh c√¥ng (first come first served)<br>- User c√≤n l·∫°i nh·∫≠n status FAILED qua WebSocket<br>- Kh√¥ng c√≥ data corruption<br>- Gh·∫ø ch·ªâ thu·ªôc v·ªÅ 1 user        | C√≥ √≠t nh·∫•t 2 user ƒë√£ ƒëƒÉng nh·∫≠p v√† c√πng xem showtime | Pending |           |        | Pending |           |        | Pending |           |        |      |

---

## üîÑ SCENARIO D: WEBSOCKET REAL-TIME UPDATES

| Test Case ID | Test Case Description                         | Test Case Procedure                                                                                                                | Expected Results                                                                                                                          | Pre-conditions                               | Round 1 | Test date | Tester | Round 2 | Test date | Tester | Round 3 | Test date | Tester | Note |
| ------------ | --------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------- | ------- | --------- | ------ | ------- | --------- | ------ | ------- | --------- | ------ | ---- |
| TC-WS-001    | WebSocket broadcast khi gh·∫ø ƒë∆∞·ª£c ch·ªçn         | 1. User A m·ªü trang ch·ªçn gh·∫ø (Browser 1)<br>2. User B m·ªü trang ch·ªçn gh·∫ø (Browser 2)<br>3. User A ch·ªçn gh·∫ø X                         | - User B th·∫•y gh·∫ø X chuy·ªÉn sang m√†u v√†ng (HELD) ngay l·∫≠p t·ª©c<br>- Kh√¥ng c·∫ßn refresh trang<br>- WebSocket message c√≥ status = "HELD"       | 2 user c√πng xem showtime                     | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-WS-002    | WebSocket broadcast khi gh·∫ø ƒë∆∞·ª£c b·ªè ch·ªçn      | 1. User A v√† User B c√πng xem showtime<br>2. User A ch·ªçn gh·∫ø X<br>3. User A b·ªè ch·ªçn gh·∫ø X                                           | - User B th·∫•y gh·∫ø X quay v·ªÅ m√†u xanh (AVAILABLE) ngay l·∫≠p t·ª©c<br>- User B c√≥ th·ªÉ ch·ªçn gh·∫ø X                                               | 2 user c√πng xem showtime, User A ƒë√£ ch·ªçn gh·∫ø | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-WS-003    | WebSocket broadcast khi thanh to√°n th√†nh c√¥ng | 1. User A v√† User B c√πng xem showtime<br>2. User A ch·ªçn gh·∫ø X v√† thanh to√°n th√†nh c√¥ng<br>3. Backend x·ª≠ l√Ω IPN v√† broadcast BOOKED | - User B th·∫•y gh·∫ø X chuy·ªÉn sang m√†u ƒë·ªè (BOOKED) ngay l·∫≠p t·ª©c<br>- User B kh√¥ng th·ªÉ ch·ªçn gh·∫ø X<br>- WebSocket message c√≥ status = "BOOKED" | 2 user c√πng xem showtime, User A ƒë√£ checkout | Pending |           |        | Pending |           |        | Pending |           |        |      |
| TC-WS-004    | WebSocket reconnect sau khi m·∫•t k·∫øt n·ªëi       | 1. User ƒëang ·ªü trang ch·ªçn gh·∫ø<br>2. T·∫Øt m·∫°ng (disconnect)<br>3. B·∫≠t m·∫°ng l·∫°i (reconnect)                                           | - WebSocket t·ª± ƒë·ªông reconnect sau 5s<br>- Tr·∫°ng th√°i gh·∫ø ƒë∆∞·ª£c sync l·∫°i t·ª´ backend<br>- User c√≥ th·ªÉ ti·∫øp t·ª•c s·ª≠ d·ª•ng                       | User ƒëang ·ªü trang ch·ªçn gh·∫ø                   | Pending |           |        | Pending |           |        | Pending |           |        |      |

---

## üìä T·ªîNG K·∫æT

### **S·ªë l∆∞·ª£ng test cases theo scenario:**

- **Scenario A - Lu·ªìng ƒë·∫∑t v√© c∆° b·∫£n:** 11 test cases
- **Scenario B - Authentication & Authorization:** 3 test cases
- **Scenario C - Error Handling & Edge Cases:** 6 test cases
- **Scenario D - WebSocket Real-time Updates:** 4 test cases

**T·ªîNG C·ªòNG: 24 test cases**

### **Priority:**

- **P0 (Critical):** TC-BOOK-001, TC-BOOK-003, TC-BOOK-009, TC-BOOK-010, TC-WS-003
- **P1 (High):** T·∫•t c·∫£ test cases trong Scenario A v√† B
- **P2 (Medium):** Test cases trong Scenario C v√† D

### **Test Environment Requirements:**

1. **Frontend:** Next.js app ch·∫°y tr√™n localhost:3000
2. **Backend:** Spring Boot API ch·∫°y tr√™n localhost:8885
3. **Database:** Test DB v·ªõi test data (movies, showtimes, seats, users)
4. **Redis:** Test Redis instance cho seat hold v√† order session
5. **WebSocket:** STOMP over SockJS connection
6. **VNPay Sandbox:** Test payment v·ªõi VNPay sandbox environment

### **Test Data Setup:**

- 2 test users v·ªõi credentials h·ª£p l·ªá
- 1 movie v·ªõi showtimes trong t∆∞∆°ng lai
- 1 showtime v·ªõi √≠t nh·∫•t 10 seats AVAILABLE
- 1 payment method VNPAY active
- 1-2 concessions v·ªõi stock > 0

---

## üìù NOTES QUAN TR·ªåNG

1. **WebSocket Testing:** C·∫ßn test v·ªõi 2 browser windows ƒë·ªÉ verify real-time updates
2. **Redis TTL:** C√≥ th·ªÉ mock ho·∫∑c d√πng Redis v·ªõi TTL ng·∫Øn cho test
3. **VNPay Callback:** C·∫ßn mock ho·∫∑c d√πng VNPay sandbox
4. **Concurrent Tests:** C·∫ßn ch·∫°y v·ªõi 2+ users ƒë·ªÉ test race conditions
5. **Transaction Rollback:** ƒê·∫£m b·∫£o test data ƒë∆∞·ª£c cleanup sau m·ªói test
6. **Idempotency:** ƒê·∫∑c bi·ªát quan tr·ªçng v·ªõi payment callbacks
7. **Frontend Flow:** Test cases ƒë∆∞·ª£c vi·∫øt d·ª±a tr√™n quy tr√¨nh th·ª±c t·∫ø t·ª´ frontend:
   - Ch·ªçn su·∫•t chi·∫øu ‚Üí Ch·ªçn gh·∫ø ‚Üí Ch·ªçn combo (t√πy ch·ªçn) ‚Üí Thanh to√°n ‚Üí X√°c nh·∫≠n

---

## üîÑ C·∫¨P NH·∫¨T

- **Version:** 1.0
- **Last Updated:** 2024-12-XX
- **Updated By:** System Test Team
- **Changes:**
  - T·∫°o l·∫°i format theo b·∫£ng v·ªõi quy tr√¨nh t·ª´ frontend
  - Th√™m Scenario D cho WebSocket testing
  - C·∫≠p nh·∫≠t procedure d·ª±a tr√™n flow th·ª±c t·∫ø c·ªßa frontend
